# Функционал регистрации в клиенте

## Обзор

В клиент добавлен функционал регистрации новых пользователей. Теперь пользователи могут как входить в систему, так и регистрироваться через единый интерфейс.

## Новые возможности

### 1. Интерактивное меню выбора
При запуске клиента пользователю предлагается выбрать действие:
- **1. Войти в систему** - авторизация существующего пользователя
- **2. Зарегистрироваться** - создание нового аккаунта

### 2. Функция регистрации
Добавлена новая функция `registerUser(login, password string) (string, error)`:
- Отправляет POST запрос на `/api/auth/register`
- Возвращает JWT токен при успешной регистрации
- Обрабатывает ошибки регистрации (например, пользователь уже существует)

### 3. Улучшенная обработка ошибок
- При неудачной регистрации клиент автоматически пытается войти в систему
- Информативные сообщения об ошибках
- Сохранение токена в файл `jwt_token.txt`

## Использование

### Запуск клиента
```bash
go run cmd/client/main.go
```

### Пример сессии
```
Выберите действие:
1. Войти в систему
2. Зарегистрироваться
Введите номер (1 или 2): 2

Введите логин
newuser

Введите пароль
password123

Регистрация нового пользователя...
Успешная авторизация!

Введите длинный URL
https://example.com
```

## Тестирование

Добавлены тесты для функции регистрации:
- `TestRegisterUser` - успешная регистрация
- `TestRegisterUser_ServerError` - обработка ошибок сервера
- `TestRegisterUser_EmptyCredentials` - валидация пустых данных
- `TestRegisterUser_InvalidEndpoint` - обработка сетевых ошибок

## API Endpoints

Клиент использует следующие эндпоинты:
- `POST /api/auth/register` - регистрация нового пользователя
- `POST /api/auth/login` - авторизация существующего пользователя

## Переменные окружения

- `AUTH_SERVER_URL` - URL сервера авторизации (по умолчанию: `http://localhost:8082`)
- `AUTH_TOKEN` - токен авторизации (опционально)

## Файлы

- `jwt_token.txt` - сохраненный JWT токен для последующих запросов
- `login_data.json` - файл с учетными данными (для автоматического входа)
